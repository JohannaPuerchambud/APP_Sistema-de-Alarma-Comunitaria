<div class="layout">
  <!-- Sidebar -->
  <nav class="sidebar">
    <div class="sidebar-header text-center">
      <h5>Alarma Comunitaria</h5>
      <hr />
      <div class="user-info">
        <i class="bi bi-person-circle"></i>
        <div>
          <strong>{{ userName }}</strong><br />
          <small>{{ userRole }}</small>
        </div>
      </div>
      <hr />
    </div>

    <ul class="menu list-unstyled">

      <li *ngIf="auth.isAdminGeneral()">
        <a routerLink="/neighborhoods"
           routerLinkActive="active"
           [routerLinkActiveOptions]="{ exact: true }">
          <i class="bi bi-building"></i>
          Barrios
        </a>
      </li>

        <li *ngIf="auth.isAdminGeneral() || auth.isAdminBarrio()">
        <a routerLink="/users"
           routerLinkActive="active"
           [routerLinkActiveOptions]="{ exact: true }">
          <i class="bi bi-people"></i>
          Usuarios
        </a>
      </li>
      
      <!-- 2. ENLACE MODIFICADO: Solo Admin General -->
      <li *ngIf="auth.isAdminGeneral()">
        <a routerLink="/map-delimit"
           routerLinkActive="active"
           [routerLinkActiveOptions]="{ exact: true }">
          <i class="bi bi-geo-alt"></i>
          Delimitar Barrios
        </a>
      </li>

      <!-- 1. NUEVO ENLACE: Visualizar Mapa -->
      <li>
        <a routerLink="/map-viewer"
           routerLinkActive="active"
           [routerLinkActiveOptions]="{ exact: true }">
          <i class="bi bi-map"></i>
          Ver Mapa de Barrios
        </a>
      </li>

      <li class="logout">
        <a (click)="logout()">
          <i class="bi bi-box-arrow-right"></i>
          Salir
        </a>
      </li>
    </ul>
  </nav>

  <!-- Contenido -->
  <main class="content">
    <router-outlet></router-outlet>
  </main>
</div>